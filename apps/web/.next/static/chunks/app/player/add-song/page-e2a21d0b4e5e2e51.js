(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{1847:(e,s,t)=>{Promise.resolve().then(t.bind(t,1932))},1932:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var a=t(4568),r=t(7620),l=t(4665),n=t(2002),i=t(9306),o=t(8008),c=t(2306),d=t(5974),u=t(5770),f=t.n(u),m=t(4458),p=t(6826),x=t(6337),h=t(7988),N=t(4632),g=t(4289),v=t(2233);let b=h.bL;h.YJ;let j=h.WT,y=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(h.l9,{ref:s,className:(0,v.cn)("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-10 w-full items-center justify-between rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,a.jsx)(h.In,{asChild:!0,children:(0,a.jsx)(N.A,{className:"size-4 opacity-50"})})]})});y.displayName=h.l9.displayName;let w=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(h.PP,{ref:s,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(g.A,{className:"size-4"})})});w.displayName=h.PP.displayName;let A=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(h.wn,{ref:s,className:(0,v.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(N.A,{className:"size-4"})})});A.displayName=h.wn.displayName;let _=r.forwardRef((e,s)=>{let{className:t,children:r,position:l="popper",...n}=e;return(0,a.jsx)(h.ZL,{children:(0,a.jsxs)(h.UC,{ref:s,className:(0,v.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,a.jsx)(w,{}),(0,a.jsx)(h.LM,{className:(0,v.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(A,{})]})})});_.displayName=h.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(h.JU,{ref:s,className:(0,v.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=h.JU.displayName;let E=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(h.q7,{ref:s,className:(0,v.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(h.VF,{children:(0,a.jsx)(c.A,{className:"size-4"})})}),(0,a.jsx)(h.p4,{children:r})]})});E.displayName=h.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(h.wv,{ref:s,className:(0,v.cn)("bg-muted -mx-1 my-1 h-px",t),...r})}).displayName=h.wv.displayName;var L=t(5428),P=t(6541);let C=(0,P.createServerReference)("78b698f18ede6fb14910b6efe8375cde56cdf404e1",P.callServer,void 0,P.findSourceMapURL,"addSongAction");var R=t(8457).Buffer;let I=L._.NEXT_PUBLIC_DEVELOPMENT;function z(){let e=(0,r.useRef)(null),[s,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[h,N]=(0,r.useState)([]),[g,v]=(0,r.useState)(null),[w,A]=(0,r.useState)("Loose Track");async function L(e){let t;if(e.preventDefault(),0===s.length)return;u(!0);let a=0,r=0;for(let[e,l]of(N(Array(s.length).fill(null)),s.entries())){let s=new FormData;s.append("file",l),N(s=>{let t=[...s];return t[e]="loading",t});let n=await C(s,""!==g?g:null,w,t);N(s=>{let t=[...s];return t[e]=(null==n?void 0:n.success)?"success":"error",t}),(null==n?void 0:n.success)?(a++,t=n.coverUrl):r++}o("".concat(a," file(s) uploaded successfully, ").concat(r," failed.")),u(!1)}async function P(e){let s=R.from(await e.arrayBuffer());return await d.ix(s,e.type)}return I?(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-[#0A0A0A] pb-[69px]",children:[(0,a.jsx)("div",{className:"flex items-center justify-between bg-[#0A0A0A] p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f(),{href:"/player",passHref:!0,children:(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"size-7",children:(0,a.jsx)(l.A,{className:"size-4"})})}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"size-7",disabled:!0,children:(0,a.jsx)(n.A,{className:"size-4"})}),(0,a.jsx)("span",{className:"text-sm",children:"Add Songs"})]})}),(0,a.jsx)("form",{onSubmit:L,className:"space-y-4 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(m.$,{onClick:()=>{var s;return null===(s=e.current)||void 0===s?void 0:s.click()},className:"h-7 text-xs",size:"sm",children:"Select File"}),s.length>0&&(0,a.jsx)(m.$,{onClick:()=>{t([]),N([]),o(null)},variant:"ghost",className:"h-7 text-xs",size:"sm",children:"Clear"}),(0,a.jsx)(p.p,{type:"text",placeholder:"Album",value:g||"",onChange:e=>v(e.target.value),className:"h-7 w-36 !text-xs focus-visible:ring-0"}),(0,a.jsxs)(b,{onValueChange:A,defaultValue:w,children:[(0,a.jsx)(y,{className:"h-7 w-36 text-xs",children:(0,a.jsx)(j,{placeholder:"Loose Track"})}),(0,a.jsxs)(_,{children:[(0,a.jsx)(E,{value:"Loose Track",children:"Loose Track"}),(0,a.jsx)(E,{value:"Features",children:"Features"}),(0,a.jsx)(E,{value:"Edit & Remasters",children:"Edit & Remasters"}),(0,a.jsx)(E,{value:"Official Project",children:"Official Project"}),(0,a.jsx)(E,{value:"Demo",children:"Demo"})]})]})]}),(0,a.jsx)("input",{type:"file",className:"hidden",multiple:!0,ref:e,onChange:function(e){e.target.files&&t([...s,...Array.from(e.target.files)])}}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,a.jsx)("span",{className:"text-xs text-gray-400",children:i}),(0,a.jsx)(m.$,{type:"submit",variant:"secondary",className:"h-7 bg-[#282828] text-xs text-white hover:bg-[#3E3E3E]",disabled:c,children:c?"Uploading...":"Upload"})]})]})}),(0,a.jsxs)(x.ScrollArea,{className:"flex-1 px-4 py-3",children:[(0,a.jsx)("div",{className:"min-w-max",children:(0,a.jsx)(U,{files:s,removeFile:function(e){t(s.filter((s,t)=>t!==e))},getMetadata:P,uploadStates:h})}),(0,a.jsx)(x.ScrollBar,{orientation:"horizontal"})]})]}):(0,a.jsx)("div",{children:"Upload is disabled in production."})}let U=e=>{let{files:s,removeFile:t,getMetadata:r,uploadStates:l}=e;return(0,a.jsxs)("table",{className:"w-full text-xs",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10 border-b border-[#282828] bg-[#0A0A0A]",children:(0,a.jsxs)("tr",{className:"text-left text-gray-400",children:[(0,a.jsx)("th",{className:"w-10 py-2 pl-3 pr-2 font-medium",children:"#"}),(0,a.jsx)("th",{className:"p-2 font-medium",children:"Title"}),(0,a.jsx)("th",{className:"hidden p-2 font-medium sm:table-cell",children:"Artist"}),(0,a.jsx)("th",{className:"hidden p-2 font-medium md:table-cell",children:"Album"}),(0,a.jsx)("th",{className:"p-2 font-medium",children:"Duration"}),(0,a.jsx)("th",{className:"w-8 p-2 font-medium"})]})}),(0,a.jsx)("tbody",{className:"mt-px",children:s.map((e,s)=>(0,a.jsx)(O,{file:e,index:s,removeFile:t,getMetadata:r,state:l[s]},s))})]})},O=e=>{let{file:s,index:t,removeFile:l,getMetadata:n,state:o}=e,[c,d]=(0,r.useState)(null);return((0,r.useEffect)(()=>{n(s).then(d)},[s,n]),c)?(0,a.jsxs)("tr",{className:"group relative cursor-pointer hover:bg-[#1A1A1A]",children:[(0,a.jsx)("td",{className:"py-2 pl-3 pr-2",children:(0,a.jsx)(S,{state:o,index:t})}),(0,a.jsx)("td",{className:"p-2",children:c.common.title}),(0,a.jsx)("td",{className:"hidden p-2 sm:table-cell",children:c.common.artist}),(0,a.jsx)("td",{className:"hidden p-2 md:table-cell",children:c.common.album}),(0,a.jsx)("td",{className:"p-2",children:c.format.duration?(0,v.a3)(c.format.duration):0}),(0,a.jsx)("td",{className:"w-8 p-2",children:(0,a.jsxs)(m.$,{variant:"ghost",size:"icon",className:"size-5",onClick:()=>l(t),children:[(0,a.jsx)(i.A,{className:"size-3 text-gray-400"}),(0,a.jsx)("span",{className:"sr-only",children:"Remove"})]})})]}):null},S=e=>{let{state:s,index:t}=e;switch(s){case"loading":return(0,a.jsx)(o.A,{className:"size-4 animate-spin text-neutral-600"});case"error":return(0,a.jsx)(i.A,{className:"size-4 text-red-500"});case"success":return(0,a.jsx)(c.A,{className:"size-4 text-green-500"});default:return t+1}}},4458:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(4568),r=t(7620),l=t(7680),n=t(3686),i=t(2233);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",iconXs:"h-6 w-6"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:c=!1,...d}=e,u=c?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:t})),ref:s,...d})});c.displayName="Button"},6826:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(4568),r=t(7620),l=t(2233);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("border-input bg-background ring-offset-background file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},6337:(e,s,t)=>{"use strict";t.d(s,{ScrollArea:()=>i,ScrollBar:()=>o});var a=t(4568),r=t(7620),l=t(4243),n=t(2233);let i=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",t),...i,children:[(0,a.jsx)(l.LM,{className:"size-full rounded-[inherit]",children:r}),(0,a.jsx)(o,{}),(0,a.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let o=r.forwardRef((e,s)=>{let{className:t,orientation:r="vertical",...i}=e;return(0,a.jsx)(l.VM,{ref:s,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-px","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-px",t),...i,children:(0,a.jsx)(l.lr,{className:"bg-border relative flex-1 rounded-full"})})});o.displayName=l.VM.displayName},2233:(e,s,t)=>{"use strict";t.d(s,{CY:()=>i,Sw:()=>c,a3:()=>o,cn:()=>n});var a=t(4568),r=t(5928),l=t(6564);let n=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,r.$)(s))},i=e=>{let s=[];return e.forEach(e=>{if(e.includes("https://pillowcase.su")||e.includes("https://plwcse.top")){var t;let a=null===(t=e.match(/\/f\/([a-f0-9]{32})/))||void 0===t?void 0:t[1];if(a)return s.push({link:"https://api.plwcse.top/api/download/".concat(a),isPillowcase:!0})}else if(e.includes("https://music.froste.lol/"))return console.log(e),s.push({link:"".concat(e,"/file"),isPillowcase:!0});return s.push({link:e,isPillowcase:!1})}),s};function o(e){if(isNaN(e)||e<0)return"0:00";let s=Math.floor(e/60),t=Math.floor(e%60).toString().padStart(2,"0");return"".concat(s,":").concat(t)}function c(e,s){return s?e.split(RegExp("(".concat(s,")"),"gi")).map((e,t)=>e.toLowerCase()===s.toLowerCase()?(0,a.jsx)("mark",{className:"bg-yellow-200 text-black",children:e},t):e):e}},5428:(e,s,t)=>{"use strict";t.d(s,{_:()=>n});var a=t(6077),r=t(8774),l=t(1205);let n=(0,a.w)({server:{GOOGLE_SITE_VERIFICATION_ID:r.z.string().min(1).optional(),APP_URL:r.z.string().url().min(1),CLOUDINARY_CLOUD_NAME:r.z.string().min(1),CLOUDINARY_API_KEY:r.z.string().min(1),CLOUDINARY_API_SECRET:r.z.string().min(1),DEVELOPMENT:r.z.boolean()},client:{NEXT_PUBLIC_APP_URL:r.z.string().url().min(1),NEXT_PUBLIC_DEVELOPMENT:r.z.boolean()},runtimeEnv:{APP_URL:l.env.APP_URL,GOOGLE_SITE_VERIFICATION_ID:l.env.GOOGLE_SITE_VERIFICATION_ID,NEXT_PUBLIC_APP_URL:l.env.NEXT_PUBLIC_APP_URL,CLOUDINARY_CLOUD_NAME:l.env.CLOUDINARY_CLOUD_NAME,CLOUDINARY_API_KEY:l.env.CLOUDINARY_API_KEY,CLOUDINARY_API_SECRET:l.env.CLOUDINARY_API_SECRET,NEXT_PUBLIC_DEVELOPMENT:!1,DEVELOPMENT:!1}})}},e=>{var s=s=>e(e.s=s);e.O(0,[411,599,770,243,575,951,587,541,358],()=>s(1847)),_N_E=e.O()}]);