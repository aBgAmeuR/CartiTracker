"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{1967:(e,t,n)=>{n.a(e,async(e,r)=>{try{let e,z,K;n.d(t,{Vr:()=>eD});var i=n(8457).Buffer;let W=(()=>{let e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return t=>e.call(t)})();function o(e){return"Uint8Array"===W(e)}function s(e){return"object"==typeof e&&null!=e&&Symbol.toStringTag in e&&("ArrayBuffer"===e[Symbol.toStringTag]||"SharedArrayBuffer"===e[Symbol.toStringTag])}function f(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}function u(e){return"object"==typeof e&&null!=e&&Symbol.toStringTag in e&&"Map"===e[Symbol.toStringTag]}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){return JSON.stringify(e,(e,t)=>"bigint"==typeof t?{$numberLong:`${t}`}:u(t)?Object.fromEntries(t):t)}let G=Symbol.for("@@mdb.bson.version"),X=0x8000000000000000-1;Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class Q extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,t){super(e,t)}static isBSONError(e){return null!=e&&"object"==typeof e&&"bsonError"in e&&!0===e.bsonError&&"name"in e&&"message"in e&&"stack"in e}}class ee extends Q{get name(){return"BSONVersionError"}constructor(){super("Unsupported BSON version, bson types must be from bson 6.x.x")}}class et extends Q{get name(){return"BSONRuntimeError"}constructor(e){super(e)}}class en extends Q{get name(){return"BSONOffsetError"}constructor(e,t,n){super(`${e}. offset: ${t}`,n),this.offset=t}}function h(t,n,r,i){if(i){e??=new TextDecoder("utf8",{fatal:!0});try{return e.decode(t.subarray(n,r))}catch(e){throw new Q("Invalid UTF-8 string in BSON document",{cause:e})}}return(z??=new TextDecoder("utf8",{fatal:!1})).decode(t.subarray(n,r))}function g(e,t,n){if(0===e.length)return"";let r=n-t;if(0===r)return"";if(r>20)return null;if(1===r&&e[t]<128)return String.fromCharCode(e[t]);if(2===r&&e[t]<128&&e[t+1]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);if(3===r&&e[t]<128&&e[t+1]<128&&e[t+2]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2]);let i=[];for(let r=t;r<n;r++){let t=e[r];if(t>127)return null;i.push(t)}return String.fromCharCode(...i)}function c(e){return ei.fromNumberArray(Array.from({length:e},()=>Math.floor(256*Math.random())))}let er=await (async()=>{try{return(await Promise.all([n.e(473),n.e(334)]).then(n.t.bind(n,5209,19))).randomBytes}catch{return c}})(),ei={toLocalBufferType(e){if(i.isBuffer(e))return e;if(ArrayBuffer.isView(e))return i.from(e.buffer,e.byteOffset,e.byteLength);let t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return i.from(e);throw new Q("Cannot create Buffer from the passed potentialBuffer.")},allocate:e=>i.alloc(e),allocateUnsafe:e=>i.allocUnsafe(e),equals:(e,t)=>ei.toLocalBufferType(e).equals(t),fromNumberArray:e=>i.from(e),fromBase64:e=>i.from(e,"base64"),toBase64:e=>ei.toLocalBufferType(e).toString("base64"),fromISO88591:e=>i.from(e,"binary"),toISO88591:e=>ei.toLocalBufferType(e).toString("binary"),fromHex:e=>i.from(e,"hex"),toHex:e=>ei.toLocalBufferType(e).toString("hex"),toUTF8(e,t,n,r){let i=n-t<=20?g(e,t,n):null;if(null!=i)return i;let o=ei.toLocalBufferType(e).toString("utf8",t,n);if(r){for(let r=0;r<o.length;r++)if(65533===o.charCodeAt(r)){h(e,t,n,!0);break}}return o},utf8ByteLength:e=>i.byteLength(e,"utf8"),encodeUTF8Into(e,t,n){let r=function(e,t,n){if(0===t.length)return 0;if(t.length>25||e.length-n<t.length)return null;for(let r=0,i=n;r<t.length;r++,i++){let n=t.charCodeAt(r);if(n>127)return null;e[i]=n}return t.length}(e,t,n);return null!=r?r:ei.toLocalBufferType(e).write(t,n,void 0,"utf8")},randomBytes:er,swap32:e=>ei.toLocalBufferType(e).swap32()};function b(e){if(e<0)throw RangeError(`The argument 'byteLength' is invalid. Received ${e}`);return ef.fromNumberArray(Array.from({length:e},()=>Math.floor(256*Math.random())))}let eo=(()=>{let{crypto:e}=globalThis;if(null!=e&&"function"==typeof e.getRandomValues)return t=>e.getRandomValues(ef.allocate(t));if(function(){let{navigator:e}=globalThis;return"object"==typeof e&&"ReactNative"===e.product}()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return b})(),es=/(\d|[a-f])/i,ef={toLocalBufferType(e){let t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("Uint8Array"===t)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return new Uint8Array(e);throw new Q("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(e){if("number"!=typeof e)throw TypeError(`The "size" argument must be of type number. Received ${String(e)}`);return new Uint8Array(e)},allocateUnsafe:e=>ef.allocate(e),equals(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},fromNumberArray:e=>Uint8Array.from(e),fromBase64:e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)),toBase64:e=>btoa(ef.toISO88591(e)),fromISO88591:e=>Uint8Array.from(e,e=>255&e.charCodeAt(0)),toISO88591:e=>Array.from(Uint16Array.from(e),e=>String.fromCharCode(e)).join(""),fromHex(e){let t=e.length%2==0?e:e.slice(0,e.length-1),n=[];for(let e=0;e<t.length;e+=2){let r=t[e],i=t[e+1];if(!es.test(r)||!es.test(i))break;let o=Number.parseInt(`${r}${i}`,16);n.push(o)}return Uint8Array.from(n)},toHex:e=>Array.from(e,e=>e.toString(16).padStart(2,"0")).join(""),toUTF8(e,t,n,r){let i=n-t<=20?g(e,t,n):null;return null!=i?i:h(e,t,n,r)},utf8ByteLength:e=>new TextEncoder().encode(e).byteLength,encodeUTF8Into(e,t,n){let r=new TextEncoder().encode(t);return e.set(r,n),r.byteLength},randomBytes:eo,swap32(e){if(e.length%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e.length;t+=4){let n=e[t],r=e[t+1],i=e[t+2],o=e[t+3];e[t]=o,e[t+1]=i,e[t+2]=r,e[t+3]=n}return e}},eu="function"==typeof i&&i.prototype?._isBuffer!==!0?ei:ef;class el{get[G](){return 6}[Symbol.for("nodejs.util.inspect.custom")](e,t,n){return this.inspect(e,t,n)}}let ea=new Float64Array(1),eh=new Uint8Array(ea.buffer,0,8);ea[0]=-1;let eg=0===eh[7],ec={isBigEndian:eg,getNonnegativeInt32LE(e,t){if(e[t+3]>127)throw RangeError(`Size cannot be negative at offset: ${t}`);return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},getInt32LE:(e,t)=>e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,getUint32LE:(e,t)=>e[t]+256*e[t+1]+65536*e[t+2]+0x1000000*e[t+3],getUint32BE:(e,t)=>e[t+3]+256*e[t+2]+65536*e[t+1]+0x1000000*e[t],getBigInt64LE(e,t){let n=ec.getUint32LE(e,t),r=ec.getUint32LE(e,t+4);return(BigInt(r)<<BigInt(32))+BigInt(n)},getFloat64LE:eg?(e,t)=>(eh[7]=e[t],eh[6]=e[t+1],eh[5]=e[t+2],eh[4]=e[t+3],eh[3]=e[t+4],eh[2]=e[t+5],eh[1]=e[t+6],eh[0]=e[t+7],ea[0]):(e,t)=>(eh[0]=e[t],eh[1]=e[t+1],eh[2]=e[t+2],eh[3]=e[t+3],eh[4]=e[t+4],eh[5]=e[t+5],eh[6]=e[t+6],eh[7]=e[t+7],ea[0]),setInt32BE:(e,t,n)=>(e[t+3]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t]=n,4),setInt32LE:(e,t,n)=>(e[t]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+3]=n,4),setBigInt64LE(e,t,n){let r=BigInt(0xffffffff),i=Number(n&r);e[t]=i,i>>=8,e[t+1]=i,i>>=8,e[t+2]=i,i>>=8,e[t+3]=i;let o=Number(n>>BigInt(32)&r);return e[t+4]=o,o>>=8,e[t+5]=o,o>>=8,e[t+6]=o,o>>=8,e[t+7]=o,8},setFloat64LE:eg?(e,t,n)=>(ea[0]=n,e[t]=eh[7],e[t+1]=eh[6],e[t+2]=eh[5],e[t+3]=eh[4],e[t+4]=eh[3],e[t+5]=eh[2],e[t+6]=eh[1],e[t+7]=eh[0],8):(e,t,n)=>(ea[0]=n,e[t]=eh[0],e[t+1]=eh[1],e[t+2]=eh[2],e[t+3]=eh[3],e[t+4]=eh[4],e[t+5]=eh[5],e[t+6]=eh[6],e[t+7]=eh[7],8)};class eb extends el{get _bsontype(){return"Binary"}constructor(e,t){if(super(),null!=e&&"string"==typeof e&&!ArrayBuffer.isView(e)&&!s(e)&&!Array.isArray(e))throw new Q("Binary can only be constructed from Uint8Array or number[]");this.sub_type=t??eb.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=eu.allocate(eb.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?eu.fromNumberArray(e):eu.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){let t;if("string"==typeof e&&1!==e.length)throw new Q("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new Q("only accepts single character Uint8Array or Array");if((t="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||t>255)throw new Q("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=t;else{let e=eu.allocate(eb.BUFFER_SIZE+this.buffer.length);e.set(this.buffer,0),this.buffer=e,this.buffer[this.position++]=t}}write(e,t){if(t="number"==typeof t?t:this.position,this.buffer.byteLength<t+e.length){let t=eu.allocate(this.buffer.byteLength+e.length);t.set(this.buffer,0),this.buffer=t}if(ArrayBuffer.isView(e))this.buffer.set(eu.toLocalBufferType(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position;else if("string"==typeof e)throw new Q("input cannot be string")}read(e,t){t=t&&t>0?t:this.position;let n=e+t;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return eu.toBase64(this.buffer.subarray(0,this.position))}toString(e){return"hex"===e?eu.toHex(this.buffer.subarray(0,this.position)):"base64"===e?eu.toBase64(this.buffer.subarray(0,this.position)):eu.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===eb.SUBTYPE_VECTOR&&p(this);let t=eu.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}toUUID(){if(this.sub_type===eb.SUBTYPE_UUID)return new ey(this.buffer.subarray(0,this.position));throw new Q(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${eb.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,t){return new eb(eu.fromHex(e),t)}static createFromBase64(e,t){return new eb(eu.fromBase64(e),t)}static fromExtendedJSON(e,t){let n,r;if(t=t||{},"$binary"in e?t.legacy&&"string"==typeof e.$binary&&"$type"in e?(r=e.$type?parseInt(e.$type,16):0,n=eu.fromBase64(e.$binary)):"string"!=typeof e.$binary&&(r=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=eu.fromBase64(e.$binary.base64)):"$uuid"in e&&(r=4,n=ey.bytesFromString(e.$uuid)),!n)throw new Q(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return 4===r?new ey(n):new eb(n,r)}inspect(e,t,n){n??=a;let r=eu.toBase64(this.buffer.subarray(0,this.position)),i=n(r,t),o=n(this.sub_type,t);return`Binary.createFromBase64(${i}, ${o})`}toInt8Array(){if(this.sub_type!==eb.SUBTYPE_VECTOR)throw new Q("Binary sub_type is not Vector");if(this.buffer[0]!==eb.VECTOR_TYPE.Int8)throw new Q("Binary datatype field is not Int8");return new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==eb.SUBTYPE_VECTOR)throw new Q("Binary sub_type is not Vector");if(this.buffer[0]!==eb.VECTOR_TYPE.Float32)throw new Q("Binary datatype field is not Float32");let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ec.isBigEndian&&eu.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==eb.SUBTYPE_VECTOR)throw new Q("Binary sub_type is not Vector");if(this.buffer[0]!==eb.VECTOR_TYPE.PackedBit)throw new Q("Binary datatype field is not packed bit");return new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==eb.SUBTYPE_VECTOR)throw new Q("Binary sub_type is not Vector");if(this.buffer[0]!==eb.VECTOR_TYPE.PackedBit)throw new Q("Binary datatype field is not packed bit");let e=this.length()-2,t=8*e-this.buffer[1],n=new Int8Array(t);for(let e=0;e<n.length;e++){let t=e/8|0,r=this.buffer[t+2],i=7-e%8,o=r>>i&1;n[e]=o}return n}static fromInt8Array(e){let t=eu.allocate(e.byteLength+2);t[0]=eb.VECTOR_TYPE.Int8,t[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return t.set(n,2),new this(t,this.SUBTYPE_VECTOR)}static fromFloat32Array(e){let t=eu.allocate(e.byteLength+2);t[0]=eb.VECTOR_TYPE.Float32,t[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return t.set(n,2),ec.isBigEndian&&eu.swap32(new Uint8Array(t.buffer,2)),new this(t,this.SUBTYPE_VECTOR)}static fromPackedBits(e,t=0){let n=eu.allocate(e.byteLength+2);return n[0]=eb.VECTOR_TYPE.PackedBit,n[1]=t,n.set(e,2),new this(n,this.SUBTYPE_VECTOR)}static fromBits(e){let t=e.length+7>>>3,n=new Uint8Array(t+2);n[0]=eb.VECTOR_TYPE.PackedBit;let r=e.length%8;n[1]=0===r?0:8-r;for(let t=0;t<e.length;t++){let r=t>>>3,i=e[t];if(0!==i&&1!==i)throw new Q(`Invalid bit value at ${t}: must be 0 or 1, found ${e[t]}`);if(0===i)continue;let o=7-t%8;n[r+2]|=i<<o}return new this(n,eb.SUBTYPE_VECTOR)}}function p(e){if(e.sub_type!==eb.SUBTYPE_VECTOR)return;let t=e.position,n=e.buffer[0],r=e.buffer[1];if((n===eb.VECTOR_TYPE.Float32||n===eb.VECTOR_TYPE.Int8)&&0!==r)throw new Q("Invalid Vector: padding must be zero for int8 and float32 vectors");if(n===eb.VECTOR_TYPE.PackedBit&&0!==r&&2===t)throw new Q("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(n===eb.VECTOR_TYPE.PackedBit&&r>7)throw new Q(`Invalid Vector: padding must be a value between 0 and 7. found: ${r}`)}eb.BSON_BINARY_SUBTYPE_DEFAULT=0,eb.BUFFER_SIZE=256,eb.SUBTYPE_DEFAULT=0,eb.SUBTYPE_FUNCTION=1,eb.SUBTYPE_BYTE_ARRAY=2,eb.SUBTYPE_UUID_OLD=3,eb.SUBTYPE_UUID=4,eb.SUBTYPE_MD5=5,eb.SUBTYPE_ENCRYPTED=6,eb.SUBTYPE_COLUMN=7,eb.SUBTYPE_SENSITIVE=8,eb.SUBTYPE_VECTOR=9,eb.SUBTYPE_USER_DEFINED=128,eb.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});let ep=/^[0-9A-F]{32}$/i,em=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class ey extends eb{constructor(e){let t;if(null==e)t=ey.generate();else if(e instanceof ey)t=eu.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&16===e.byteLength)t=eu.toLocalBufferType(e);else if("string"==typeof e)t=ey.bytesFromString(e);else throw new Q("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(t,4)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[eu.toHex(this.buffer.subarray(0,4)),eu.toHex(this.buffer.subarray(4,6)),eu.toHex(this.buffer.subarray(6,8)),eu.toHex(this.buffer.subarray(8,10)),eu.toHex(this.buffer.subarray(10,16))].join("-"):eu.toHex(this.buffer)}toString(e){return"hex"===e?eu.toHex(this.id):"base64"===e?eu.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof ey)return eu.equals(e.id,this.id);try{return eu.equals(new ey(e).id,this.id)}catch{return!1}}toBinary(){return new eb(this.id,eb.SUBTYPE_UUID)}static generate(){let e=eu.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}static isValid(e){return!!e&&("string"==typeof e?ey.isValidUUIDString(e):o(e)?16===e.byteLength:"Binary"===e._bsontype&&e.sub_type===this.SUBTYPE_UUID&&16===e.buffer.byteLength)}static createFromHexString(e){let t=ey.bytesFromString(e);return new ey(t)}static createFromBase64(e){return new ey(eu.fromBase64(e))}static bytesFromString(e){if(!ey.isValidUUIDString(e))throw new Q("UUID string representation must be 32 hex digits or canonical hyphenated representation");return eu.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return ep.test(e)||em.test(e)}inspect(e,t,n){return n??=a,`new UUID(${n(this.toHexString(),t)})`}}class ed extends el{get _bsontype(){return"Code"}constructor(e,t){super(),this.code=e.toString(),this.scope=t??null}toJSON(){return null!=this.scope?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new ed(e.$code,e.$scope)}inspect(e,t,n){let r=(n??=a)(this.code,t),i=r.includes("\n");null!=this.scope&&(r+=`,${i?"\n":" "}${n(this.scope,t)}`);let o=i&&null===this.scope;return`new Code(${i?"\n":""}${r}${o?"\n":""})`}}class ew extends el{get _bsontype(){return"DBRef"}constructor(e,t,n,r){super();let i=e.split(".");2===i.length&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=t,this.db=n,this.fields=r||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}static fromExtendedJSON(e){let t=Object.assign({},e);return delete t.$ref,delete t.$id,delete t.$db,new ew(e.$ref,e.$id,e.$db,t)}inspect(e,t,n){let r=[(n??=a)(this.namespace,t),n(this.oid,t),...this.db?[n(this.db,t)]:[],...Object.keys(this.fields).length>0?[n(this.fields,t)]:[]];return r[1]=n===a?`new ObjectId(${r[1]})`:r[1],`new DBRef(${r.join(", ")})`}}function m(e){if(""===e)return e;let t=0,n="-"===e[t],r="+"===e[t];(r||n)&&(t+=1);let i=!1;for(;t<e.length&&"0"===e[t];++t)i=!0;return i?`${n?"-":""}${e.length===t?"0":e.slice(t)}`:r?e.slice(1):e}try{K=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}let eB={},eS={},eE=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class eN extends el{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,t,n){super();let r="boolean"==typeof t?t:!!n,i="string"==typeof e?eN.fromString(e,r):"bigint"==typeof e?eN.fromBigInt(e,r):{low:0|e,high:0|("number"==typeof t?t:0),unsigned:r};this.low=i.low,this.high=i.high,this.unsigned=i.unsigned}static fromBits(e,t,n){return new eN(e,t,n)}static fromInt(e,t){let n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=eS[e]))?r:(n=eN.fromBits(e,(0|e)<0?-1:0,!0),i&&(eS[e]=n),n):(e|=0,(i=-128<=e&&e<128)&&(r=eB[e]))?r:(n=eN.fromBits(e,e<0?-1:0,!1),i&&(eB[e]=n),n)}static fromNumber(e,t){if(isNaN(e))return t?eN.UZERO:eN.ZERO;if(t){if(e<0)return eN.UZERO;if(e>=0xffffffffffffffff)return eN.MAX_UNSIGNED_VALUE}else{if(e<=-0x8000000000000000)return eN.MIN_VALUE;if(e+1>=0x8000000000000000)return eN.MAX_VALUE}return e<0?eN.fromNumber(-e,t).neg():eN.fromBits(e%0x100000000|0,e/0x100000000|0,t)}static fromBigInt(e,t){let n=BigInt(0xffffffff),r=BigInt(32);return new eN(Number(e&n),Number(e>>r&n),t)}static _fromString(e,t,n){let r;if(0===e.length)throw new Q("empty string");if(n<2||36<n)throw new Q("radix");if((r=e.indexOf("-"))>0)throw new Q("interior hyphen");if(0===r)return eN._fromString(e.substring(1),t,n).neg();let i=eN.fromNumber(Math.pow(n,8)),o=eN.ZERO;for(let t=0;t<e.length;t+=8){let r=Math.min(8,e.length-t),s=parseInt(e.substring(t,t+r),n);if(r<8){let e=eN.fromNumber(Math.pow(n,r));o=o.mul(e).add(eN.fromNumber(s))}else o=(o=o.mul(i)).add(eN.fromNumber(s))}return o.unsigned=t,o}static fromStringStrict(e,t,n){let r=!1;if("number"==typeof t?(n=t,t=!1):r=!!t,n??=10,e.trim()!==e)throw new Q(`Input: '${e}' contains leading and/or trailing whitespace`);if(!function(e,t){t=t??10;let n="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,t);return!RegExp(`[^-+${n}]`,"i").test(e)&&e}(e,n))throw new Q(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=m(e),o=eN._fromString(i,r,n);if(o.toString(n).toLowerCase()!==i.toLowerCase())throw new Q(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${null!=n?`with radix: ${n}`:""}`);return o}static fromString(e,t,n){let r=!1;return("number"==typeof t?(n=t,t=!1):r=!!t,n??=10,"NaN"===e&&n<24)?eN.ZERO:("Infinity"===e||"+Infinity"===e||"-Infinity"===e)&&n<35?eN.ZERO:eN._fromString(e,r,n)}static fromBytes(e,t,n){return n?eN.fromBytesLE(e,t):eN.fromBytesBE(e,t)}static fromBytesLE(e,t){return new eN(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}static fromBytesBE(e,t){return new eN(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}static isLong(e){return null!=e&&"object"==typeof e&&"__isLong__"in e&&!0===e.__isLong__}static fromValue(e,t){return"number"==typeof e?eN.fromNumber(e,t):"string"==typeof e?eN.fromString(e,t):eN.fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}add(e){eN.isLong(e)||(e=eN.fromValue(e));let t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,f=e.low>>>16,u=65535&e.low,l=0,a=0,h=0,g;return g=0+(i+u),h+=g>>>16,g&=65535,h+=r+f,a+=h>>>16,h&=65535,a+=n+s,l+=a>>>16,a&=65535,l+=t+o,l&=65535,eN.fromBits(h<<16|g,l<<16|a,this.unsigned)}and(e){return eN.isLong(e)||(e=eN.fromValue(e)),eN.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(eN.isLong(e)||(e=eN.fromValue(e)),this.eq(e))return 0;let t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){let t,n,r;if(eN.isLong(e)||(e=eN.fromValue(e)),e.isZero())throw new Q("division by zero");if(K){if(!this.unsigned&&-0x80000000===this.high&&-1===e.low&&-1===e.high)return this;let t=(this.unsigned?K.div_u:K.div_s)(this.low,this.high,e.low,e.high);return eN.fromBits(t,K.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?eN.UZERO:eN.ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return eN.UZERO;if(e.gt(this.shru(1)))return eN.UONE;r=eN.UZERO}else{if(this.eq(eN.MIN_VALUE))return e.eq(eN.ONE)||e.eq(eN.NEG_ONE)?eN.MIN_VALUE:e.eq(eN.MIN_VALUE)?eN.ONE:(t=this.shr(1).div(e).shl(1)).eq(eN.ZERO)?e.isNegative()?eN.ONE:eN.NEG_ONE:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(eN.MIN_VALUE))return this.unsigned?eN.UZERO:eN.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=eN.ZERO}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),s=eN.fromNumber(t),f=s.mul(e);for(;f.isNegative()||f.gt(n);)t-=o,f=(s=eN.fromNumber(t,this.unsigned)).mul(e);s.isZero()&&(s=eN.ONE),r=r.add(s),n=n.sub(f)}return r}div(e){return this.divide(e)}equals(e){return eN.isLong(e)||(e=eN.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){let e;if(this.isNegative())return this.eq(eN.MIN_VALUE)?64:this.neg().getNumBitsAbs();let t=0!==this.high?this.high:this.low;for(e=31;e>0&&(t&1<<e)==0;e--);return 0!==this.high?e+33:e+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(1&this.low)==0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(1&this.low)==1}isPositive(){return this.unsigned||this.high>=0}isZero(){return 0===this.high&&0===this.low}lessThan(e){return 0>this.comp(e)}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return 0>=this.comp(e)}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(eN.isLong(e)||(e=eN.fromValue(e)),K){let t=(this.unsigned?K.rem_u:K.rem_s)(this.low,this.high,e.low,e.high);return eN.fromBits(t,K.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return eN.ZERO;if(eN.isLong(e)||(e=eN.fromValue(e)),K){let t=K.mul(this.low,this.high,e.low,e.high);return eN.fromBits(t,K.get_high(),this.unsigned)}if(e.isZero())return eN.ZERO;if(this.eq(eN.MIN_VALUE))return e.isOdd()?eN.MIN_VALUE:eN.ZERO;if(e.eq(eN.MIN_VALUE))return this.isOdd()?eN.MIN_VALUE:eN.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(eN.TWO_PWR_24)&&e.lt(eN.TWO_PWR_24))return eN.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,f=e.low>>>16,u=65535&e.low,l=0,a=0,h=0,g;return g=0+i*u,h+=g>>>16,g&=65535,h+=r*u,a+=h>>>16,h&=65535,h+=i*f,a+=h>>>16,h&=65535,a+=n*u,l+=a>>>16,a&=65535,a+=r*f,l+=a>>>16,a&=65535,a+=i*s,l+=a>>>16,a&=65535,l+=t*u+n*f+r*s+i*o,l&=65535,eN.fromBits(h<<16|g,l<<16|a,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(eN.MIN_VALUE)?eN.MIN_VALUE:this.not().add(eN.ONE)}neg(){return this.negate()}not(){return eN.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return eN.isLong(e)||(e=eN.fromValue(e)),eN.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return(eN.isLong(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?eN.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):eN.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return(eN.isLong(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?eN.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):eN.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(eN.isLong(e)&&(e=e.toInt()),e&=63,0===e)return this;{let t=this.high;if(e<32){let n=this.low;return eN.fromBits(n>>>e|t<<32-e,t>>>e,this.unsigned)}return 32===e?eN.fromBits(t,0,this.unsigned):eN.fromBits(t>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return eN.isLong(e)||(e=eN.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*0x100000000+(this.low>>>0):0x100000000*this.high+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}toSigned(){return this.unsigned?eN.fromBits(this.low,this.high,!1):this}toString(e){if((e=e||10)<2||36<e)throw new Q("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(eN.MIN_VALUE))return"-"+this.neg().toString(e);{let t=eN.fromNumber(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}}let t=eN.fromNumber(Math.pow(e,6),this.unsigned),n=this,r="";for(;;){let i=n.div(t),o=(n.sub(i.mul(t)).toInt()>>>0).toString(e);if((n=i).isZero())return o+r;for(;o.length<6;)o="0"+o;r=""+o+r}}toUnsigned(){return this.unsigned?this:eN.fromBits(this.low,this.high,!0)}xor(e){return eN.isLong(e)||(e=eN.fromValue(e)),eN.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,t){let{useBigInt64:n=!1,relaxed:r=!0}={...t};if(e.$numberLong.length>20)throw new Q("$numberLong string is too long");if(!eE.test(e.$numberLong))throw new Q(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let t=BigInt(e.$numberLong);return BigInt.asIntN(64,t)}let i=eN.fromString(e.$numberLong);return r?i.toNumber():i}inspect(e,t,n){let r=(n??=a)(this.toString(),t),i=this.unsigned?`, ${n(this.unsigned,t)}`:"";return`new Long(${r}${i})`}}eN.TWO_PWR_24=eN.fromInt(0x1000000),eN.MAX_UNSIGNED_VALUE=eN.fromBits(-1,-1,!0),eN.ZERO=eN.fromInt(0),eN.UZERO=eN.fromInt(0,!0),eN.ONE=eN.fromInt(1),eN.UONE=eN.fromInt(1,!0),eN.NEG_ONE=eN.fromInt(-1),eN.MAX_VALUE=eN.fromBits(-1,0x7fffffff,!1),eN.MIN_VALUE=eN.fromBits(0,-0x80000000,!1);let ex=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,eO=/^(\+|-)?(Infinity|inf)$/i,e_=/^(\+|-)?NaN$/i,e$=eu.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),eI=eu.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),eU=eu.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),eL=/^([-+])?(\d+)?$/;function y(e){return!isNaN(parseInt(e,10))}function d(e,t){throw new Q(`"${e}" is not a valid Decimal128 string - ${t}`)}class eT extends el{get _bsontype(){return"Decimal128"}constructor(e){if(super(),"string"==typeof e)this.bytes=eT.fromString(e).bytes;else if(e instanceof Uint8Array||o(e)){if(16!==e.byteLength)throw new Q("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new Q("Decimal128 must take a Buffer or string")}static fromString(e){return eT._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return eT._fromString(e,{allowRounding:!0})}static _fromString(e,t){let n=!1,r=!1,i=!1,o=!1,s=0,f=0,u=0,l=0,a=0,h=[0],g=0,c=0,b=0,p=0,m=new eN(0,0),w=new eN(0,0),B=0,S=0;if(e.length>=7e3)throw new Q(""+e+" not a valid Decimal128 string");let E=e.match(ex),N=e.match(eO),x=e.match(e_);if(!E&&!N&&!x||0===e.length)throw new Q(""+e+" not a valid Decimal128 string");if(E){let t=E[2],n=E[4],r=E[5],i=E[6];n&&void 0===i&&d(e,"missing exponent power"),n&&void 0===t&&d(e,"missing exponent base"),void 0===n&&(r||i)&&d(e,"missing e before exponent")}if(("+"===e[S]||"-"===e[S])&&(r=!0,n="-"===e[S++]),!y(e[S])&&"."!==e[S]){if("i"===e[S]||"I"===e[S])return new eT(n?eI:eU);if("N"===e[S])return new eT(e$)}for(;y(e[S])||"."===e[S];){if("."===e[S]){i&&d(e,"contains multiple periods"),i=!0,S+=1;continue}g<34&&("0"!==e[S]||o)&&(o||(a=f),o=!0,h[c++]=parseInt(e[S],10),g+=1),o&&(u+=1),i&&(l+=1),f+=1,S+=1}if(i&&!f)throw new Q(""+e+" not a valid Decimal128 string");if("e"===e[S]||"E"===e[S]){let t=e.substr(++S).match(eL);if(!t||!t[2])return new eT(e$);p=parseInt(t[0],10),S+=t[0].length}if(e[S])return new eT(e$);if(g){if(b=g-1,s=u,1!==s)for(;"0"===e[a+s-1+Number(r)+Number(i)];)s-=1}else h[0]=0,u=1,g=1,s=0;for(p<=l&&l>p+16384?p=-6176:p-=l;p>6111;){if((b+=1)>=34){if(0===s){p=6111;break}d(e,"overflow")}p-=1}if(t.allowRounding){for(;p<-6176||g<u;){if(0===b&&s<g){p=-6176,s=0;break}if(g<u?u-=1:b-=1,p<6111)p+=1;else{if(h.join("").match(/^0+$/)){p=6111;break}d(e,"overflow")}}if(b+1<s){let t=f;i&&(a+=1,t+=1),r&&(a+=1,t+=1);let o=parseInt(e[a+b+1],10),s=0;if(o>=5&&(s=1,5===o)){s=h[b]%2==1?1:0;for(let n=a+b+2;n<t;n++)if(parseInt(e[n],10)){s=1;break}}if(s){let e=b;for(;e>=0;e--)if(++h[e]>9){if(h[e]=0,0===e){if(!(p<6111))return new eT(n?eI:eU);p+=1,h[e]=1}}else break}}}else{for(;p<-6176||g<u;){if(0===b){if(0===s){p=-6176;break}d(e,"exponent underflow")}g<u?("0"!==e[u-1+Number(r)+Number(i)]&&0!==s&&d(e,"inexact rounding"),u-=1):(0!==h[b]&&d(e,"inexact rounding"),b-=1),p<6111?p+=1:d(e,"overflow")}if(b+1<s){i&&(a+=1),r&&(a+=1);let t=parseInt(e[a+b+1],10);0!==t&&d(e,"inexact rounding")}}if(m=eN.fromNumber(0),w=eN.fromNumber(0),0===s)m=eN.fromNumber(0),w=eN.fromNumber(0);else if(b<17){let e=0;for(w=eN.fromNumber(h[e++]),m=new eN(0,0);e<=b;e++)w=(w=w.multiply(eN.fromNumber(10))).add(eN.fromNumber(h[e]))}else{let e=0;for(m=eN.fromNumber(h[e++]);e<=b-17;e++)m=(m=m.multiply(eN.fromNumber(10))).add(eN.fromNumber(h[e]));for(w=eN.fromNumber(h[e++]);e<=b;e++)w=(w=w.multiply(eN.fromNumber(10))).add(eN.fromNumber(h[e]))}let O=function(e,t){if(!e&&!t)return{high:eN.fromNumber(0),low:eN.fromNumber(0)};let n=e.shiftRightUnsigned(32),r=new eN(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new eN(t.getLowBits(),0),s=n.multiply(i),f=n.multiply(o),u=r.multiply(i),l=r.multiply(o);return s=s.add(f.shiftRightUnsigned(32)),f=new eN(f.getLowBits(),0).add(u).add(l.shiftRightUnsigned(32)),s=s.add(f.shiftRightUnsigned(32)),l=f.shiftLeft(32).add(new eN(l.getLowBits(),0)),{high:s,low:l}}(m,eN.fromString("100000000000000000"));O.low=O.low.add(w),function(e,t){let n=e.high>>>0,r=t.high>>>0;if(n<r)return!0;if(n===r){let n=e.low>>>0,r=t.low>>>0;if(n<r)return!0}return!1}(O.low,w)&&(O.high=O.high.add(eN.fromNumber(1))),B=p+6176;let _={low:eN.fromNumber(0),high:eN.fromNumber(0)};O.high.shiftRightUnsigned(49).and(eN.fromNumber(1)).equals(eN.fromNumber(1))?(_.high=_.high.or(eN.fromNumber(3).shiftLeft(61)),_.high=_.high.or(eN.fromNumber(B).and(eN.fromNumber(16383).shiftLeft(47))),_.high=_.high.or(O.high.and(eN.fromNumber(0x7fffffffffff)))):(_.high=_.high.or(eN.fromNumber(16383&B).shiftLeft(49)),_.high=_.high.or(O.high.and(eN.fromNumber(0x1ffffffffffff)))),_.low=O.low,n&&(_.high=_.high.or(eN.fromString("9223372036854775808")));let $=eu.allocateUnsafe(16);return S=0,$[S++]=255&_.low.low,$[S++]=_.low.low>>8&255,$[S++]=_.low.low>>16&255,$[S++]=_.low.low>>24&255,$[S++]=255&_.low.high,$[S++]=_.low.high>>8&255,$[S++]=_.low.high>>16&255,$[S++]=_.low.high>>24&255,$[S++]=255&_.high.low,$[S++]=_.high.low>>8&255,$[S++]=_.high.low>>16&255,$[S++]=_.high.low>>24&255,$[S++]=255&_.high.high,$[S++]=_.high.high>>8&255,$[S++]=_.high.high>>16&255,$[S++]=_.high.high>>24&255,new eT($)}toString(){let e,t,n,r;let i=0,o=Array(36);for(let e=0;e<o.length;e++)o[e]=0;let s=0,f=!1,u={parts:[0,0,0,0]},l=[];s=0;let a=this.bytes,h=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,g=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,c=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24,b=a[s++]|a[s++]<<8|a[s++]<<16|a[s++]<<24;s=0,({low:new eN(h,g),high:new eN(c,b)}).high.lessThan(eN.ZERO)&&l.push("-");let p=b>>26&31;if(p>>3==3){if(30===p)return l.join("")+"Infinity";if(31===p)return"NaN";e=b>>15&16383,t=8+(b>>14&1)}else t=b>>14&7,e=b>>17&16383;let m=e-6176;if(u.parts[0]=(16383&b)+((15&t)<<14),u.parts[1]=c,u.parts[2]=g,u.parts[3]=h,0===u.parts[0]&&0===u.parts[1]&&0===u.parts[2]&&0===u.parts[3])f=!0;else for(r=3;r>=0;r--){let e=0,t=function(e){let t=eN.fromNumber(1e9),n=eN.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(let r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new eN(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}(u);if(u=t.quotient,e=t.rem.low)for(n=8;n>=0;n--)o[9*r+n]=e%10,e=Math.floor(e/10)}if(f)i=1,o[s]=0;else for(i=36;!o[s];)i-=1,s+=1;let y=i-1+m;if(y>=34||y<=-7||m>0){if(i>34)return l.push("0"),m>0?l.push(`E+${m}`):m<0&&l.push(`E${m}`),l.join("");l.push(`${o[s++]}`),(i-=1)&&l.push(".");for(let e=0;e<i;e++)l.push(`${o[s++]}`);l.push("E"),y>0?l.push(`+${y}`):l.push(`${y}`)}else if(m>=0)for(let e=0;e<i;e++)l.push(`${o[s++]}`);else{let e=i+m;if(e>0)for(let t=0;t<e;t++)l.push(`${o[s++]}`);else l.push("0");for(l.push(".");e++<0;)l.push("0");for(let t=0;t<i-Math.max(e-1,0);t++)l.push(`${o[s++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return eT.fromString(e.$numberDecimal)}inspect(e,t,n){let r=(n??=a)(this.toString(),t);return`new Decimal128(${r})`}}class ev extends el{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let t=Number(e);if("NaN"===e)return new ev(NaN);if("Infinity"===e)return new ev(1/0);if("-Infinity"===e)return new ev(-1/0);if(!Number.isFinite(t))throw new Q(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new Q(`Input: '${e}' contains whitespace`);if(""===e)throw new Q("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new Q(`Input: '${e}' is not in decimal or exponential notation`);return new ev(t)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,t){let n=parseFloat(e.$numberDouble);return t&&t.relaxed?n:new ev(n)}inspect(e,t,n){return n??=a,`new Double(${n(this.value,t)})`}}class eA extends el{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=0|+e}static fromString(e){let t=m(e),n=Number(e);if(0x7fffffff<n)throw new Q(`Input: '${e}' is larger than the maximum value for Int32`);if(-0x80000000>n)throw new Q(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==t)throw new Q(`Input: '${e}' is not a valid Int32 string`)}else throw new Q(`Input: '${e}' is not a safe integer`);return new eA(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,t){return t&&t.relaxed?parseInt(e.$numberInt,10):new eA(e.$numberInt)}inspect(e,t,n){return n??=a,`new Int32(${n(this.value,t)})`}}class ej extends el{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new ej}inspect(){return"new MaxKey()"}}class eR extends el{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new eR}inspect(){return"new MinKey()"}}let eF=null,eV=new WeakMap;class eD extends el{get _bsontype(){return"ObjectId"}constructor(e){let t;if(super(),"object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new Q("Argument passed in must have an id that is of type string or Buffer");t="toHexString"in e&&"function"==typeof e.toHexString?eu.fromHex(e.toHexString()):e.id}else t=e;if(null==t||"number"==typeof t)this.buffer=eD.generate("number"==typeof t?t:void 0);else if(ArrayBuffer.isView(t)&&12===t.byteLength)this.buffer=eu.toLocalBufferType(t);else if("string"==typeof t){if(eD.validateHexString(t))this.buffer=eu.fromHex(t),eD.cacheHexString&&eV.set(this,t);else throw new Q("input must be a 24 character hex string, 12 byte Uint8Array, or an integer")}else throw new Q("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,eD.cacheHexString&&eV.set(this,eu.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let t=0;t<24;t++){let n=e.charCodeAt(t);if((!(n>=48)||!(n<=57))&&(!(n>=97)||!(n<=102))&&(!(n>=65)||!(n<=70)))return!1}return!0}toHexString(){if(eD.cacheHexString){let e=eV.get(this);if(e)return e}let e=eu.toHex(this.id);return eD.cacheHexString&&eV.set(this,e),e}static getInc(){return eD.index=(eD.index+1)%0xffffff}static generate(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));let t=eD.getInc(),n=eu.allocateUnsafe(12);return ec.setInt32BE(n,0,e),null===eF&&(eF=eu.randomBytes(5)),n[4]=eF[0],n[5]=eF[1],n[6]=eF[2],n[7]=eF[3],n[8]=eF[4],n[11]=255&t,n[10]=t>>8&255,n[9]=t>>16&255,n}toString(e){return"base64"===e?eu.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}static is(e){return null!=e&&"object"==typeof e&&"_bsontype"in e&&"ObjectId"===e._bsontype}equals(e){if(null==e)return!1;if(eD.is(e))return this.buffer[11]===e.buffer[11]&&eu.equals(this.buffer,e.buffer);if("string"==typeof e)return e.toLowerCase()===this.toHexString();if("object"==typeof e&&"function"==typeof e.toHexString){let t=e.toHexString(),n=this.toHexString();return"string"==typeof t&&t.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,t=ec.getUint32BE(this.buffer,0);return e.setTime(1e3*Math.floor(t)),e}static createPk(){return new eD}serializeInto(e,t){return e[t]=this.buffer[0],e[t+1]=this.buffer[1],e[t+2]=this.buffer[2],e[t+3]=this.buffer[3],e[t+4]=this.buffer[4],e[t+5]=this.buffer[5],e[t+6]=this.buffer[6],e[t+7]=this.buffer[7],e[t+8]=this.buffer[8],e[t+9]=this.buffer[9],e[t+10]=this.buffer[10],e[t+11]=this.buffer[11],12}static createFromTime(e){let t=eu.allocate(12);for(let e=11;e>=4;e--)t[e]=0;return ec.setInt32BE(t,0,e),new eD(t)}static createFromHexString(e){if(e?.length!==24)throw new Q("hex string must be 24 characters");return new eD(eu.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new Q("base64 string must be 16 characters");return new eD(eu.fromBase64(e))}static isValid(e){if(null==e)return!1;if("string"==typeof e)return eD.validateHexString(e);try{return new eD(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new eD(e.$oid)}isCached(){return eD.cacheHexString&&eV.has(this)}inspect(e,t,n){return n??=a,`new ObjectId(${n(this.toHexString(),t)})`}}function w(e,t,n){let r=5;if(Array.isArray(e))for(let i=0;i<e.length;i++)r+=B(i.toString(),e[i],t,!0,n);else for(let i of("function"==typeof e?.toBSON&&(e=e.toBSON()),Object.keys(e)))r+=B(i,e[i],t,!1,n);return r}function B(e,t,n=!1,r=!1,i=!1){switch("function"==typeof t?.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+eu.utf8ByteLength(e)+1+4+eu.utf8ByteLength(t)+1;case"number":if(Math.floor(t)!==t||!(t>=-0x20000000000000)||!(t<=0x20000000000000))return(null!=e?eu.utf8ByteLength(e)+1:0)+9;if(t>=-0x80000000&&t<=0x7fffffff)return(null!=e?eu.utf8ByteLength(e)+1:0)+5;return(null!=e?eu.utf8ByteLength(e)+1:0)+9;case"undefined":if(r||!i)return(null!=e?eu.utf8ByteLength(e)+1:0)+1;return 0;case"boolean":return(null!=e?eu.utf8ByteLength(e)+1:0)+2;case"object":if(null!=t&&"string"==typeof t._bsontype&&6!==t[G])throw new ee;if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+1;if("ObjectId"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+13;if(t instanceof Date||l(t))return(null!=e?eu.utf8ByteLength(e)+1:0)+9;else if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||s(t))return(null!=e?eu.utf8ByteLength(e)+1:0)+6+t.byteLength;else if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+9;else if("Decimal128"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+17;else if("Code"===t._bsontype){if(null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?eu.utf8ByteLength(e)+1:0)+1+4+4+eu.utf8ByteLength(t.code.toString())+1+w(t.scope,n,i);return(null!=e?eu.utf8ByteLength(e)+1:0)+1+4+eu.utf8ByteLength(t.code.toString())+1}else if("Binary"===t._bsontype){let n=t;if(n.sub_type===eb.SUBTYPE_BYTE_ARRAY)return(null!=e?eu.utf8ByteLength(e)+1:0)+(n.position+1+4+1+4);return(null!=e?eu.utf8ByteLength(e)+1:0)+(n.position+1+4+1)}else if("Symbol"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+eu.utf8ByteLength(t.value)+4+1+1;else if("DBRef"===t._bsontype){let r=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(r.$db=t.db),(null!=e?eu.utf8ByteLength(e)+1:0)+1+w(r,n,i)}else if(t instanceof RegExp||f(t))return(null!=e?eu.utf8ByteLength(e)+1:0)+1+eu.utf8ByteLength(t.source)+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;else if("BSONRegExp"===t._bsontype)return(null!=e?eu.utf8ByteLength(e)+1:0)+1+eu.utf8ByteLength(t.pattern)+1+eu.utf8ByteLength(t.options)+1;else return(null!=e?eu.utf8ByteLength(e)+1:0)+w(t,n,i)+1;case"function":if(n)return(null!=e?eu.utf8ByteLength(e)+1:0)+1+4+eu.utf8ByteLength(t.toString())+1;return 0;case"bigint":return(null!=e?eu.utf8ByteLength(e)+1:0)+9;case"symbol":return 0;default:throw new Q(`Unrecognized JS type: ${typeof t}`)}}eD.index=Math.floor(0xffffff*Math.random());class eC extends el{get _bsontype(){return"BSONRegExp"}constructor(e,t){if(super(),this.pattern=e,this.options=(t??"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new Q(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(-1!==this.options.indexOf("\0"))throw new Q(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let e=0;e<this.options.length;e++)if(!("i"===this.options[e]||"m"===this.options[e]||"x"===this.options[e]||"l"===this.options[e]||"s"===this.options[e]||"u"===this.options[e]))throw new Q(`The regular expression option [${this.options[e]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e){if("string"==typeof e.$regex)return new eC(e.$regex,eC.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new eC(e.$regularExpression.pattern,eC.parseOptions(e.$regularExpression.options));throw new Q(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,t,n){let r=function(e){if(null!=e&&"object"==typeof e&&"stylize"in e&&"function"==typeof e.stylize)return e.stylize}(t)??(e=>e);n??=a;let i=r(n(this.pattern),"regexp"),o=r(n(this.options),"regexp");return`new BSONRegExp(${i}, ${o})`}}class eP extends el{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new eP(e.$symbol)}inspect(e,t,n){return n??=a,`new BSONSymbol(${n(this.value,t)})`}}let eM=eN;class eJ extends eM{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(null==e)super(0,0,!0);else if("bigint"==typeof e)super(e,!0);else if(eN.isLong(e))super(e.low,e.high,!0);else if("object"==typeof e&&"t"in e&&"i"in e){if("number"!=typeof e.t&&("object"!=typeof e.t||"Int32"!==e.t._bsontype))throw new Q("Timestamp constructed from { t, i } must provide t as a number");if("number"!=typeof e.i&&("object"!=typeof e.i||"Int32"!==e.i._bsontype))throw new Q("Timestamp constructed from { t, i } must provide i as a number");let t=Number(e.t),n=Number(e.i);if(t<0||Number.isNaN(t))throw new Q("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new Q("Timestamp constructed from { t, i } must provide a positive i");if(t>0xffffffff)throw new Q("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>0xffffffff)throw new Q("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,t,!0)}else throw new Q("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new eJ(eN.fromInt(e,!0))}static fromNumber(e){return new eJ(eN.fromNumber(e,!0))}static fromBits(e,t){return new eJ({i:e,t:t})}static fromString(e,t){return new eJ(eN.fromString(e,!0,t))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let t=eN.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=eN.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new eJ({t:n,i:t})}inspect(e,t,n){let r=(n??=a)(this.t,t),i=n(this.i,t);return`new Timestamp({ t: ${r}, i: ${i} })`}}eJ.MAX_VALUE=eN.MAX_UNSIGNED_VALUE,eN.fromNumber(0x20000000000000),eN.fromNumber(-0x20000000000000);let eY=/\x00/,eH=new Set(["$db","$ref","$id","$clusterTime"]);function S(e,t,n,r){e[r++]=2;let i=eu.encodeUTF8Into(e,t,r);e[(r=r+i+1)-1]=0;let o=eu.encodeUTF8Into(e,n,r+4);return ec.setInt32LE(e,r,o+1),r=r+4+o,e[r++]=0,r}function E(e,t,n,r){let i=!Object.is(n,-0)&&Number.isSafeInteger(n)&&n<=0x7fffffff&&n>=-0x80000000?16:1;e[r++]=i;let o=eu.encodeUTF8Into(e,t,r);return r+=o,e[r++]=0,16===i?r+=ec.setInt32LE(e,r,n):r+=ec.setFloat64LE(e,r,n),r}function N(e,t,n,r){e[r++]=18;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=ec.setBigInt64LE(e,r,n)}function x(e,t,n,r){e[r++]=10;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r}function O(e,t,n,r){e[r++]=8;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,e[r++]=n?1:0,r}function _(e,t,n,r){e[r++]=9;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=eN.fromNumber(n.getTime()),s=o.getLowBits(),f=o.getHighBits();return r+=ec.setInt32LE(e,r,s),r+=ec.setInt32LE(e,r,f)}function $(e,t,n,r){e[r++]=11;let i=eu.encodeUTF8Into(e,t,r);if(r+=i,e[r++]=0,n.source&&null!=n.source.match(eY))throw new Q("value "+n.source+" must not contain null bytes");return r+=eu.encodeUTF8Into(e,n.source,r),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function I(e,t,n,r){e[r++]=11;let i=eu.encodeUTF8Into(e,t,r);if(r+=i,e[r++]=0,null!=n.pattern.match(eY))throw new Q("pattern "+n.pattern+" must not contain null bytes");r+=eu.encodeUTF8Into(e,n.pattern,r),e[r++]=0;let o=n.options.split("").sort().join("");return r+=eu.encodeUTF8Into(e,o,r),e[r++]=0,r}function U(e,t,n,r){null===n?e[r++]=10:"MinKey"===n._bsontype?e[r++]=255:e[r++]=127;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r}function L(e,t,n,r){e[r++]=7;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=n.serializeInto(e,r)}function T(e,t,n,r){e[r++]=5;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.length;if(r+=ec.setInt32LE(e,r,o),e[r++]=0,o<=16)for(let t=0;t<o;t++)e[r+t]=n[t];else e.set(n,r);return r+=o}function v(e,t,n,r,i,o,s,f,u){if(u.has(n))throw new Q("Cannot convert circular structure to BSON");u.add(n),e[r++]=Array.isArray(n)?4:3;let l=eu.encodeUTF8Into(e,t,r);r+=l,e[r++]=0;let a=J(e,n,i,r,o+1,s,f,u);return u.delete(n),a}function A(e,t,n,r){e[r++]=19;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;for(let t=0;t<16;t++)e[r+t]=n.bytes[t];return r+16}function j(e,t,n,r){e[r++]="Long"===n._bsontype?18:17;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.getLowBits(),s=n.getHighBits();return r+=ec.setInt32LE(e,r,o),r+=ec.setInt32LE(e,r,s)}function R(e,t,n,r){n=n.valueOf(),e[r++]=16;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=ec.setInt32LE(e,r,n)}function F(e,t,n,r){e[r++]=1;let i=eu.encodeUTF8Into(e,t,r);return r+=i,e[r++]=0,r+=ec.setFloat64LE(e,r,n.value)}function V(e,t,n,r){e[r++]=13;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.toString(),s=eu.encodeUTF8Into(e,o,r+4)+1;return ec.setInt32LE(e,r,s),r=r+4+s-1,e[r++]=0,r}function D(e,t,n,r,i=!1,o=0,s=!1,f=!0,u){if(n.scope&&"object"==typeof n.scope){e[r++]=15;let l=eu.encodeUTF8Into(e,t,r);r+=l,e[r++]=0;let a=r,h=n.code;r+=4;let g=eu.encodeUTF8Into(e,h,r+4)+1;ec.setInt32LE(e,r,g),e[r+4+g-1]=0,r=r+g+4;let c=J(e,n.scope,i,r,o+1,s,f,u);r=c-1;let b=c-a;a+=ec.setInt32LE(e,a,b),e[r++]=0}else{e[r++]=13;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.code.toString(),s=eu.encodeUTF8Into(e,o,r+4)+1;ec.setInt32LE(e,r,s),r=r+4+s-1,e[r++]=0}return r}function C(e,t,n,r){e[r++]=5;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=n.buffer,s=n.position;if(n.sub_type===eb.SUBTYPE_BYTE_ARRAY&&(s+=4),r+=ec.setInt32LE(e,r,s),e[r++]=n.sub_type,n.sub_type===eb.SUBTYPE_BYTE_ARRAY&&(s-=4,r+=ec.setInt32LE(e,r,s)),n.sub_type===eb.SUBTYPE_VECTOR&&p(n),s<=16)for(let t=0;t<s;t++)e[r+t]=o[t];else e.set(o,r);return r+=n.position}function P(e,t,n,r){e[r++]=14;let i=eu.encodeUTF8Into(e,t,r);r+=i,e[r++]=0;let o=eu.encodeUTF8Into(e,n.value,r+4)+1;return ec.setInt32LE(e,r,o),r=r+4+o-1,e[r++]=0,r}function M(e,t,n,r,i,o,s){e[r++]=3;let f=eu.encodeUTF8Into(e,t,r);r+=f,e[r++]=0;let u=r,l={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(l.$db=n.db),l=Object.assign(l,n.fields);let a=J(e,l,!1,r,i+1,o,!0,s),h=a-u;return u+=ec.setInt32LE(e,r,h),a}function J(e,t,n,r,i,a,h,g){if(null==g){if(null==t)return e[0]=5,e[1]=0,e[2]=0,e[3]=0,e[4]=0,5;if(Array.isArray(t))throw new Q("serialize does not support an array as the root input");if("object"!=typeof t)throw new Q("serialize does not support non-object as the root input");if("_bsontype"in t&&"string"==typeof t._bsontype)throw new Q("BSON types cannot be serialized as a document");if(l(t)||f(t)||o(t)||s(t))throw new Q("date, regexp, typedarray, and arraybuffer cannot be BSON documents");g=new Set}g.add(t);let c=r+4;if(Array.isArray(t))for(let r=0;r<t.length;r++){let s=`${r}`,u=t[r];"function"==typeof u?.toBSON&&(u=u.toBSON());let b=typeof u;if(void 0===u)c=x(e,s,u,c);else if(null===u)c=x(e,s,u,c);else if("string"===b)c=S(e,s,u,c);else if("number"===b)c=E(e,s,u,c);else if("bigint"===b)c=N(e,s,u,c);else if("boolean"===b)c=O(e,s,u,c);else if("object"===b&&null==u._bsontype)u instanceof Date||l(u)?c=_(e,s,u,c):u instanceof Uint8Array||o(u)?c=T(e,s,u,c):c=u instanceof RegExp||f(u)?$(e,s,u,c):v(e,s,u,c,n,i,a,h,g);else if("object"===b){if(6!==u[G])throw new ee;if("ObjectId"===u._bsontype)c=L(e,s,u,c);else if("Decimal128"===u._bsontype)c=A(e,s,u,c);else if("Long"===u._bsontype||"Timestamp"===u._bsontype)c=j(e,s,u,c);else if("Double"===u._bsontype)c=F(e,s,u,c);else if("Code"===u._bsontype)c=D(e,s,u,c,n,i,a,h,g);else if("Binary"===u._bsontype)c=C(e,s,u,c);else if("BSONSymbol"===u._bsontype)c=P(e,s,u,c);else if("DBRef"===u._bsontype)c=M(e,s,u,c,i,a,g);else if("BSONRegExp"===u._bsontype)c=I(e,s,u,c);else if("Int32"===u._bsontype)c=R(e,s,u,c);else if("MinKey"===u._bsontype||"MaxKey"===u._bsontype)c=U(e,s,u,c);else if(void 0!==u._bsontype)throw new Q(`Unrecognized or invalid _bsontype: ${String(u._bsontype)}`)}else"function"===b&&a&&(c=V(e,s,u,c))}else if(t instanceof Map||u(t)){let r=t.entries(),s=!1;for(;!s;){let t=r.next();if(s=!!t.done)continue;let u=t.value[0],b=t.value[1];"function"==typeof b?.toBSON&&(b=b.toBSON());let p=typeof b;if("string"==typeof u&&!eH.has(u)){if(null!=u.match(eY))throw new Q("key "+u+" must not contain null bytes");if(n){if("$"===u[0])throw new Q("key "+u+" must not start with '$'");if(u.includes("."))throw new Q("key "+u+" must not contain '.'")}}if(void 0===b)!1===h&&(c=x(e,u,b,c));else if(null===b)c=x(e,u,b,c);else if("string"===p)c=S(e,u,b,c);else if("number"===p)c=E(e,u,b,c);else if("bigint"===p)c=N(e,u,b,c);else if("boolean"===p)c=O(e,u,b,c);else if("object"===p&&null==b._bsontype)b instanceof Date||l(b)?c=_(e,u,b,c):b instanceof Uint8Array||o(b)?c=T(e,u,b,c):c=b instanceof RegExp||f(b)?$(e,u,b,c):v(e,u,b,c,n,i,a,h,g);else if("object"===p){if(6!==b[G])throw new ee;if("ObjectId"===b._bsontype)c=L(e,u,b,c);else if("Decimal128"===b._bsontype)c=A(e,u,b,c);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)c=j(e,u,b,c);else if("Double"===b._bsontype)c=F(e,u,b,c);else if("Code"===b._bsontype)c=D(e,u,b,c,n,i,a,h,g);else if("Binary"===b._bsontype)c=C(e,u,b,c);else if("BSONSymbol"===b._bsontype)c=P(e,u,b,c);else if("DBRef"===b._bsontype)c=M(e,u,b,c,i,a,g);else if("BSONRegExp"===b._bsontype)c=I(e,u,b,c);else if("Int32"===b._bsontype)c=R(e,u,b,c);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)c=U(e,u,b,c);else if(void 0!==b._bsontype)throw new Q(`Unrecognized or invalid _bsontype: ${String(b._bsontype)}`)}else"function"===p&&a&&(c=V(e,u,b,c))}}else{if("function"==typeof t?.toBSON&&(t=t.toBSON(),null!=t&&"object"!=typeof t))throw new Q("toBSON function did not return an object");for(let r of Object.keys(t)){let s=t[r];"function"==typeof s?.toBSON&&(s=s.toBSON());let u=typeof s;if("string"==typeof r&&!eH.has(r)){if(null!=r.match(eY))throw new Q("key "+r+" must not contain null bytes");if(n){if("$"===r[0])throw new Q("key "+r+" must not start with '$'");if(r.includes("."))throw new Q("key "+r+" must not contain '.'")}}if(void 0===s)!1===h&&(c=x(e,r,s,c));else if(null===s)c=x(e,r,s,c);else if("string"===u)c=S(e,r,s,c);else if("number"===u)c=E(e,r,s,c);else if("bigint"===u)c=N(e,r,s,c);else if("boolean"===u)c=O(e,r,s,c);else if("object"===u&&null==s._bsontype)s instanceof Date||l(s)?c=_(e,r,s,c):s instanceof Uint8Array||o(s)?c=T(e,r,s,c):c=s instanceof RegExp||f(s)?$(e,r,s,c):v(e,r,s,c,n,i,a,h,g);else if("object"===u){if(6!==s[G])throw new ee;if("ObjectId"===s._bsontype)c=L(e,r,s,c);else if("Decimal128"===s._bsontype)c=A(e,r,s,c);else if("Long"===s._bsontype||"Timestamp"===s._bsontype)c=j(e,r,s,c);else if("Double"===s._bsontype)c=F(e,r,s,c);else if("Code"===s._bsontype)c=D(e,r,s,c,n,i,a,h,g);else if("Binary"===s._bsontype)c=C(e,r,s,c);else if("BSONSymbol"===s._bsontype)c=P(e,r,s,c);else if("DBRef"===s._bsontype)c=M(e,r,s,c,i,a,g);else if("BSONRegExp"===s._bsontype)c=I(e,r,s,c);else if("Int32"===s._bsontype)c=R(e,r,s,c);else if("MinKey"===s._bsontype||"MaxKey"===s._bsontype)c=U(e,r,s,c);else if(void 0!==s._bsontype)throw new Q(`Unrecognized or invalid _bsontype: ${String(s._bsontype)}`)}else"function"===u&&a&&(c=V(e,r,s,c))}}g.delete(t),e[c++]=0;let b=c-r;return r+=ec.setInt32LE(e,r,b),c}let ek={$oid:eD,$binary:eb,$uuid:eb,$symbol:eP,$numberInt:eA,$numberDecimal:eT,$numberDouble:ev,$numberLong:eN,$minKey:eR,$maxKey:ej,$regex:eC,$regularExpression:eC,$timestamp:eJ};function Y(e){let t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}let eq={Binary:e=>new eb(e.value(),e.sub_type),Code:e=>new ed(e.code,e.scope),DBRef:e=>new ew(e.collection||e.namespace,e.oid,e.db,e.fields),Decimal128:e=>new eT(e.bytes),Double:e=>new ev(e.value),Int32:e=>new eA(e.value),Long:e=>eN.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_),MaxKey:()=>new ej,MinKey:()=>new eR,ObjectId:e=>new eD(e),BSONRegExp:e=>new eC(e.pattern,e.options),BSONSymbol:e=>new eP(e.value),Timestamp:e=>eJ.fromBits(e.low,e.high)};function H(e,t){let n={useBigInt64:t?.useBigInt64??!1,relaxed:t?.relaxed??!0,legacy:t?.legacy??!1};return JSON.parse(e,(e,t)=>{if(-1!==e.indexOf("\0"))throw new Q(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(e)}`);return function e(t,n={}){var r;if("number"==typeof t){let e=t<=0x7fffffff&&t>=-0x80000000,r=t<=X&&t>=-0x8000000000000000;if(n.relaxed||n.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(e)return new eA(t);if(r)return n.useBigInt64?BigInt(t):eN.fromNumber(t)}return new ev(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;let i=Object.keys(t).filter(e=>e.startsWith("$")&&null!=t[e]);for(let e=0;e<i.length;e++){let r=ek[i[e]];if(r)return r.fromExtendedJSON(t,n)}if(null!=t.$date){let e=t.$date,r=new Date;if(n.legacy){if("number"==typeof e)r.setTime(e);else if("string"==typeof e)r.setTime(Date.parse(e));else if("bigint"==typeof e)r.setTime(Number(e));else throw new et(`Unrecognized type for EJSON date: ${typeof e}`)}else if("string"==typeof e)r.setTime(Date.parse(e));else if(eN.isLong(e))r.setTime(e.toNumber());else if("number"==typeof e&&n.relaxed)r.setTime(e);else if("bigint"==typeof e)r.setTime(Number(e));else throw new et(`Unrecognized type for EJSON date: ${typeof e}`);return r}if(null!=t.$code){let n=Object.assign({},t);return t.$scope&&(n.$scope=e(t.$scope)),ed.fromExtendedJSON(t)}if(r=t,null!=r&&"object"==typeof r&&"$id"in r&&null!=r.$id&&"$ref"in r&&"string"==typeof r.$ref&&(!("$db"in r)||"$db"in r&&"string"==typeof r.$db)||t.$dbPointer){let e=t.$ref?t:t.$dbPointer;if(e instanceof ew)return e;let n=Object.keys(e).filter(e=>e.startsWith("$")),r=!0;if(n.forEach(e=>{-1===["$ref","$id","$db"].indexOf(e)&&(r=!1)}),r)return ew.fromExtendedJSON(e)}return t}(t,n)})}function k(e,t,n,r){null!=n&&"object"==typeof n&&(r=n,n=0),null==t||"object"!=typeof t||Array.isArray(t)||(r=t,t=void 0,n=0);let i=Object.assign({relaxed:!0,legacy:!1},r,{seenObjects:[{propertyName:"(root)",obj:null}]}),o=function e(t,n){if(t instanceof Map||u(t)){let r=Object.create(null);for(let[e,n]of t){if("string"!=typeof e)throw new Q("Can only serialize maps with string keys");r[e]=n}return e(r,n)}if(("object"==typeof t||"function"==typeof t)&&null!==t){let e=n.seenObjects.findIndex(e=>e.obj===t);if(-1!==e){let t=n.seenObjects.map(e=>e.propertyName),r=t.slice(0,e).map(e=>`${e} -> `).join(""),i=t[e],o=" -> "+t.slice(e+1,t.length-1).map(e=>`${e} -> `).join(""),s=t[t.length-1],f=" ".repeat(r.length+i.length/2),u="-".repeat(o.length+(i.length+s.length)/2-1);throw new Q(`Converting circular structure to EJSON:
    ${r}${i}${o}${s}
    ${f}\\${u}/`)}n.seenObjects[n.seenObjects.length-1].obj=t}if(Array.isArray(t))return t.map((t,r)=>{n.seenObjects.push({propertyName:`index ${r}`,obj:null});try{return e(t,n)}finally{n.seenObjects.pop()}});if(void 0===t)return null;if(t instanceof Date||l(t)){let e=t.getTime(),r=e>-1&&e<2534023188e5;return n.legacy?n.relaxed&&r?{$date:t.getTime()}:{$date:Y(t)}:n.relaxed&&r?{$date:Y(t)}:{$date:{$numberLong:t.getTime().toString()}}}if("number"==typeof t&&(!n.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=-0x80000000&&t<=0x7fffffff)return{$numberInt:t.toString()};if(t>=-0x8000000000000000&&t<=X)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if("bigint"==typeof t)return n.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||f(t)){let e=t.flags;if(void 0===e){let n=t.toString().match(/[gimuy]*$/);n&&(e=n[0])}return new eC(t.source,e).toExtendedJSON(n)}return null!=t&&"object"==typeof t?function(t,n){if(null==t||"object"!=typeof t)throw new Q("not an object instance");let r=t._bsontype;if(void 0===r){let r={};for(let i of Object.keys(t)){n.seenObjects.push({propertyName:i,obj:null});try{let o=e(t[i],n);"__proto__"===i?Object.defineProperty(r,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):r[i]=o}finally{n.seenObjects.pop()}}return r}if(null!=t&&"object"==typeof t&&"string"==typeof t._bsontype&&6!==t[G])throw new ee;if(null!=t&&"object"==typeof t&&"_bsontype"in t&&"string"==typeof t._bsontype){let i=t;if("function"!=typeof i.toExtendedJSON){let e=eq[t._bsontype];if(!e)throw new Q("Unrecognized or invalid _bsontype: "+t._bsontype);i=e(i)}return"Code"===r&&i.scope?i=new ed(i.code,e(i.scope,n)):"DBRef"===r&&i.oid&&(i=new ew(e(i.collection,n),e(i.oid,n),e(i.db,n),e(i.fields,n))),i.toExtendedJSON(n)}throw new Q("_bsontype must be a string, but was: "+typeof r)}(t,n):t}(e,i);return JSON.stringify(o,t,n)}let eZ=Object.create(null);function q(e,t){try{return ec.getNonnegativeInt32LE(e,t)}catch(e){throw new en("BSON size cannot be negative",t,{cause:e})}}function Z(e,t){let n=t;for(;0!==e[n];n++);if(n===e.length-1)throw new en("Null terminator not found",t);return n}eZ.parse=H,eZ.stringify=k,eZ.serialize=function(e,t){return t=t||{},JSON.parse(k(e,t))},eZ.deserialize=function(e,t){return t=t||{},H(JSON.stringify(e),t)},Object.freeze(eZ);let ez=Object.create(null);ez.parseToElements=function(e,t=0){if(t??=0,e.length<5)throw new en(`Input must be at least 5 bytes, got ${e.length} bytes`,t);let n=q(e,t);if(n>e.length-t)throw new en(`Parsed documentSize (${n} bytes) does not match input length (${e.length} bytes)`,t);if(0!==e[t+n-1])throw new en("BSON documents must end in 0x00",t+n);let r=[],i=t+4;for(;i<=n+t;){let o;let s=e[i];if(i+=1,0===s){if(i-t!==n)throw new en("Invalid 0x00 type byte",i);break}let f=i,u=Z(e,i)-f;if(i+=u+1,1===s||18===s||9===s||17===s)o=8;else if(16===s)o=4;else if(7===s)o=12;else if(19===s)o=16;else if(8===s)o=1;else if(10===s||6===s||127===s||255===s)o=0;else if(11===s)o=Z(e,Z(e,i)+1)+1-i;else if(3===s||4===s||15===s)o=q(e,i);else if(2===s||5===s||12===s||13===s||14===s)o=q(e,i)+4,5===s&&(o+=1),12===s&&(o+=12);else throw new en(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(o>n)throw new en("value reports length larger than document",i);r.push([s,f,u,i,o]),i+=o}return r},ez.ByteUtils=eu,ez.NumberUtils=ec,Object.freeze(ez),eu.allocate(0x1100000),r()}catch(e){r(e)}},1)}}]);